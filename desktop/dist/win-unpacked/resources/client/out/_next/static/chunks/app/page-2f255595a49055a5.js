(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>p,gC:()=>x,l6:()=>d,yv:()=>m});var s=a(5155),r=a(2115),o=a(883),l=a(9007),n=a(2614),i=a(2251),c=a(4269);let d=o.bL;o.YJ;let m=o.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(o.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(o.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=o.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});f.displayName=o.PP.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=o.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,s.jsx)(o.ZL,{children:(0,s.jsxs)(o.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(f,{}),(0,s.jsx)(o.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(h,{})]})})});x.displayName=o.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=o.JU.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(o.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})}),(0,s.jsx)(o.p4,{children:r})]})});p.displayName=o.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=o.wv.displayName},3179:(e,t,a)=>{"use strict";a.d(t,{i:()=>n});var s=a(9829);let r="https://loteria-gfrn.onrender.com";class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}getLastRoom(){return this.lastRoom}onRoomJoined(e){return this.socket.on("roomJoined",e),()=>this.socket.off("roomJoined",e)}onGameUpdate(e){return this.socket.on("gameUpdated",e),()=>this.socket.off("gameUpdated",e)}onRoomUpdate(e){return this.socket.on("roomUpdated",e),()=>this.socket.off("roomUpdated",e)}onPlayerJoined(e){return this.socket.on("playerJoined",e),()=>this.socket.off("playerJoined",e)}onPlayerLeft(e){return this.socket.on("playerLeft",e),()=>this.socket.off("playerLeft",e)}onGameStartCountdown(e){return this.socket.on("gameStartCountdown",e),()=>this.socket.off("gameStartCountdown",e)}async ensureConnection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;if(!this.socket.connected){if(this.connecting)return void await new Promise(t=>{let a=setInterval(()=>{this.socket.connected&&(clearInterval(a),t())},100);setTimeout(()=>{clearInterval(a),t()},e)});this.connecting=!0,this.socket.connect(),await new Promise(t=>{let a=()=>{this.socket.off("connect",a),this.connecting=!1,t()};this.socket.once("connect",a),setTimeout(()=>{this.socket.off("connect",a),this.connecting=!1,t()},e)})}}async joinRoom(e,t,a){return await this.ensureConnection(),new Promise(s=>{let r=e=>{l(),this.lastRoom=e,s({success:!0,room:e})},o=e=>{l(),s({success:!1,error:e})},l=()=>{this.socket.off("roomJoined",r),this.socket.off("joinError",o),this.socket.off("error",o)};this.socket.once("roomJoined",r),this.socket.once("joinError",o),this.socket.once("error",o),this.socket.emit("joinRoom",{roomId:e,playerName:t,playerData:a})})}async leaveRoom(e,t){try{await this.ensureConnection(),this.socket.emit("leaveRoom",{roomId:e,playerName:t}),this.lastRoom=null}catch(e){}}updateRoom(e,t){return new Promise((a,s)=>{try{this.socket.emit("updateRoom",e,t,e=>{e?s(e):a()})}catch(e){s(e)}})}async emit(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];await this.ensureConnection();try{return new Promise((t,s)=>{try{this.socket.emit(e,...a,function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a&&0!==a.length?2===a.length&&a[0]?s(a[0]):t(a[0]):t(void 0)})}catch(e){console.error("[gameSocket] emit internal error",e),s(e)}})}catch(e){throw console.error("[gameSocket] emit error",e),e}}onClaimWinResult(e){return this.socket.on("claimWinResult",e),()=>this.socket.off("claimWinResult",e)}constructor(){this.connecting=!1,this.lastRoom=null,console.log("[gameSocket] Inicializando con SERVER_URL:",r),this.socket=(0,s.io)(r,{transports:["polling","websocket"],autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,path:"/socket.io/",secure:!0,rejectUnauthorized:!1,withCredentials:!0}),this.socket.on("roomJoined",e=>{this.lastRoom=e}),this.socket.on("connect",()=>{console.debug("[gameSocket] connected",this.socket.id)}),this.socket.on("disconnect",e=>{console.debug("[gameSocket] disconnected",e)}),this.socket.on("connect_error",e=>{console.error("[gameSocket] connect_error:",e)}),this.socket.on("error",e=>{console.error("[gameSocket] error:",e)})}}let l=null;function n(){return l||(l=o.getInstance()),l}},6415:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(5155),r=a(2115),o=a(63),l=a(3179),n=a(3594),i=a(1398),c=a(6948),d=a(4269);let m=r.forwardRef((e,t)=>{let{className:a,type:r,...o}=e;return(0,s.jsx)("input",{type:r,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});m.displayName="Input";var u=a(3998),f=a(7602),h=r.forwardRef((e,t)=>(0,s.jsx)(f.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));h.displayName="Label";let x=(0,a(3101).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(h,{ref:t,className:(0,d.cn)(x(),a),...r})});p.displayName=h.displayName;var g=a(4294);let j=(0,g.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),y=(0,g.A)("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);var b=a(7187),N=a(8053),w=a(6615);function v(e){var t;let{open:a,onClose:r,roomId:l,maxPlayers:n=25}=e,i=(0,o.useRouter)();return(0,s.jsx)(N.Lt,{open:a,children:(0,s.jsxs)(N.EO,{className:"max-w-sm w-[90vw] pt-4 px-6 pb-6",children:[(0,s.jsx)(N.Zr,{asChild:!0,children:(0,s.jsx)("button",{className:"   absolute top-3 right-3   rounded-full p-1.5   bg-[#165C5D] hover:bg-[#1E7374]   border border-gray-200   shadow-sm transition-all duration-200   w-7 h-7 flex items-center justify-center   ","aria-label":"Cerrar",onClick:r,children:(0,s.jsx)(w.A,{className:"w-4 h-4 text-white"})})}),(0,s.jsxs)(N.wd,{className:"mt-6",children:[(0,s.jsx)(N.r7,{className:"text-lg font-semibold text-center",children:"Sala llena"}),(0,s.jsxs)(N.$v,{className:"text-center text-sm text-muted-foreground mt-2",children:["La ".concat({sala_1:"Sala 1",sala_2:"Sala 2",sala_3:"Sala 3",sala_4:"Sala 4"}[t=l||""]||t," ha alcanzado el l\xedmite de ").concat(n," jugadores."),(0,s.jsx)("br",{}),"Intenta nuevamente cuando alguien se desconecte o elige otra sala."]})]}),(0,s.jsx)(N.ck,{className:"mt-6",children:(0,s.jsxs)("div",{className:"w-full flex flex-col gap-3",children:[(0,s.jsx)(u.$,{onClick:()=>{r(),i.push("/")},className:"w-full bg-[hsl(180.85,61.74%,22.55%)] hover:bg-[hsl(180.85,61.74%,25%)] text-white",children:"Seleccionar otra sala"}),(0,s.jsx)(u.$,{onClick:()=>i.push("/"),variant:"outline",className:"w-full",children:"Volver al inicio"})]})})]})})}function k(e){let{open:t,onClose:a}=e;return(0,s.jsx)(N.Lt,{open:t,children:(0,s.jsxs)(N.EO,{className:"max-w-sm w-[90vw] pt-4 px-6 pb-6",children:[(0,s.jsx)(N.Zr,{asChild:!0,children:(0,s.jsx)("button",{className:"   absolute top-3 right-3   rounded-full p-1.5   bg-[#165C5D] hover:bg-[#1E7374]   border border-gray-200 shadow-sm   transition-all duration-200   w-7 h-7 flex items-center justify-center   ","aria-label":"Cerrar",onClick:a,children:(0,s.jsx)(w.A,{className:"w-4 h-4 text-[#ffffff] hover:text-gray-700"})})}),(0,s.jsxs)(N.wd,{className:"mt-6",children:[(0,s.jsx)(N.r7,{className:"text-lg font-semibold text-center",children:"Nombre ya en uso"}),(0,s.jsx)(N.$v,{className:"text-center text-sm text-muted-foreground mt-2",children:"Ya existe un jugador con ese nombre en el juego. Por favor, elige otro nombre para continuar."})]}),(0,s.jsx)(N.ck,{className:"mt-6",children:(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)(u.$,{onClick:a,className:"   w-[min(80%,240px)]   bg-[hsl(180.85,61.74%,22.55%)]   hover:bg-[hsl(180.85,61.74%,25%)]   text-white   ",children:"Entendido"})})})]})})}var C=a(1186);let R=[{id:"sala_1",label:"Sala 1"},{id:"sala_2",label:"Sala 2"},{id:"sala_3",label:"Sala 3"},{id:"sala_4",label:"Sala 4"}];function S(){let[e,t]=(0,r.useState)(""),[a,d]=(0,r.useState)("sala_1"),[f,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),S=(0,o.useRouter)(),I=async t=>{if(t.preventDefault(),N)return;let s=e.trim();if(!s||!a)return;w(!0);let r={name:s,isOnline:!0,board:(0,n.u7)(),markedIndices:[]};try{let e=await (0,l.i)().joinRoom(a,s,r);if(!e.success){var o,i;(null==(o=e.error)?void 0:o.code)==="full"?h(!0):(null==(i=e.error)||i.code,g(!0)),w(!1);return}try{sessionStorage.setItem("loteria:justJoined","1")}catch(e){}S.push("/room/".concat(a,"?name=").concat(encodeURIComponent(s)))}catch(e){console.error("joinRoom error:",e),g(!0),w(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[(0,s.jsx)(i.Y,{}),(0,s.jsx)("main",{className:"flex-grow container mx-auto p-4 md:p-6 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsxs)(c.Zp,{className:"border-2",style:{borderColor:"hsl(180.85, 61.74%, 22.55%)"},children:[(0,s.jsxs)(c.aR,{className:"text-center",children:[(0,s.jsx)("img",{src:"/loteria.png",alt:"Loter\xeda Logo",className:"h-140 w-360"}),(0,s.jsx)(c.BT,{className:"pt-2 font-lato font-regular",children:"Ingresa tu nombre y selecciona una sala para jugar."})]}),(0,s.jsxs)(c.Wu,{children:[(0,s.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p,{htmlFor:"room-select",className:"text-base",children:"Seleccionar sala"}),(0,s.jsxs)(C.l6,{value:a,onValueChange:d,children:[(0,s.jsx)(C.bq,{id:"room-select",className:"text-base",children:(0,s.jsx)(C.yv,{placeholder:"Elige una sala"})}),(0,s.jsx)(C.gC,{children:R.map(e=>(0,s.jsx)(C.eb,{value:e.id,children:e.label},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p,{htmlFor:"name",className:"text-base",children:"Nombre"}),(0,s.jsx)(m,{id:"name",value:e,onChange:e=>{e.currentTarget.setCustomValidity(""),t(e.target.value)},onInvalid:e=>{e.target.setCustomValidity("Por favor, ingresa un nombre.")},placeholder:"Ej. El Valiente",required:!0,className:"text-base"})]}),(0,s.jsx)(u.$,{type:"submit",className:"w-full",size:"lg",disabled:N,children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{className:"mr-2 h-5 w-5 animate-spin"}),"Cargando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{className:"mr-2"}),"Entrar a la sala"]})})]}),(0,s.jsx)("div",{className:"my-4 border-t border-muted",children:(0,s.jsxs)(u.$,{className:"w-full",variant:"outline",size:"lg",onClick:()=>S.push("/glosary"),children:[(0,s.jsx)(b.A,{className:"mr-2"}),"Glosario de cartas"]})}),(0,s.jsx)("div",{className:"my-4 border-t border-muted",children:(0,s.jsxs)(u.$,{className:"w-full",variant:"outline",size:"lg",onClick:()=>S.push("/instructions"),children:[(0,s.jsx)("img",{src:"/LoteriaSI-InterfazIconoInstructivo.svg",alt:"Instructivo Icon",className:"h-4 w-4 inline-block mr-2"}),"Instructivo del juego"]})})]})]})})}),(0,s.jsx)("footer",{className:"text-center p-4 text-muted-foreground text-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("img",{src:"/icono-CDC.png",alt:"C\xe9lula de Desarrollo",className:"h-7"}),(0,s.jsx)("p",{children:"Elaborado por C\xe9lula de Desarrollo de Contenidos DGTI Xalapa."})]})}),(0,s.jsx)(v,{open:f,onClose:()=>h(!1),roomId:a,maxPlayers:25}),(0,s.jsx)(k,{open:x,onClose:()=>g(!1)})]})}},7187:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(4294).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},8053:(e,t,a)=>{"use strict";a.d(t,{$v:()=>x,EO:()=>m,Lt:()=>i,Zr:()=>p,ck:()=>f,r7:()=>h,wd:()=>u});var s=a(5155),r=a(2115),o=a(5646),l=a(4269),n=a(3998);let i=o.bL;o.l9;let c=o.ZL,d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});d.displayName=o.hJ.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{}),(0,s.jsx)(o.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});m.displayName=o.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};u.displayName="AlertDialogHeader";let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};f.displayName="AlertDialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold",a),...r})});h.displayName=o.hE.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=o.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.rc,{ref:t,className:(0,l.cn)((0,n.r)(),a),...r})}).displayName=o.rc.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.ZD,{ref:t,className:(0,l.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});p.displayName=o.ZD.displayName},9774:(e,t,a)=>{Promise.resolve().then(a.bind(a,6415))}},e=>{e.O(0,[873,617,835,441,255,358],()=>e(e.s=9774)),_N_E=e.O()}]);